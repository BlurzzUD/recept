class RecipeDatabase {
    constructor() {
        this.recipes = this.generateRecipeDatabase();
        console.log('üìö RecipeDatabase loaded with', Object.keys(this.recipes).length, 'recipe categories');
    }

    generateRecipeDatabase() {
        return {
            // LEVESEK
            'guly√°sleves': [
                {
                    title: 'Guly√°sleves eredeti recept',
                    source: 'magyar konyha',
                    url: '#',
                    ingredients: [
                        '60 dkg marhah√∫s',
                        '2 fej v√∂r√∂shagyma',
                        '2 gerezd fokhagyma',
                        '3 db s√°rgar√©pa',
                        '1 db petrezselyemgy√∂k√©r',
                        '2 db zeller',
                        '4 db burgonya',
                        '2 ek olaj',
                        '1 ek pirospaprika',
                        '1 tk k√∂m√©ny',
                        's√≥, bors √≠zl√©s szerint',
                        '2 db z√∂ldpaprika',
                        '2 db paradicsom'
                    ],
                    instructions: [
                        'A hagym√°t apr√≥ra v√°gjuk √©s az olajon √ºvegesre pir√≠tjuk.',
                        'Hozz√°adjuk a fokhagym√°t, majd a felkock√°zott h√∫st.',
                        'Megsz√≥rjuk pirospaprik√°val, majd fel√∂ntj√ºk v√≠zzel.',
                        'Hozz√°adjuk a k√∂m√©nyt, s√≥t, borsot.',
                        'Hozz√°adjuk a karik√°ra v√°gott s√°rgar√©p√°t, petrezselyemgy√∂keret, zellert.',
                        '20 perc f≈ëz√©s ut√°n hozz√°adjuk a burgony√°t.',
                        'V√©g√ºl a z√∂ldpaprik√°t √©s paradicsomot is beletessz√ºk.',
                        'Puh√°ra f≈ëzz√ºk √©s friss keny√©rrel t√°laljuk.'
                    ]
                }
            ],

            'h√∫sleves': [
                {
                    title: 'H√∫sleves csonttal',
                    source: 'magyar konyha',
                    url: '#',
                    ingredients: [
                        '1 kg csirkesz√°rny vagy marhacsont',
                        '2 fej v√∂r√∂shagyma',
                        '3 db s√°rgar√©pa',
                        '1 db petrezselyemgy√∂k√©r',
                        '1 db zeller',
                        '1 db karal√°b√©',
                        's√≥ √≠zl√©s szerint',
                        'bors √≠zl√©s szerint',
                        '1 db bab√©rlev√©l',
                        'friss petrezselyem',
                        '2 db toj√°s',
                        '20 dkg csiga t√©szta'
                    ],
                    instructions: [
                        'A h√∫st megmossuk √©s nagy l√°basba tessz√ºk.',
                        'Fel√∂ntj√ºk hideg v√≠zzel √©s felforraljuk.',
                        'A habot leszedj√ºk, majd hozz√°adjuk a megh√°mozott, felv√°gott z√∂lds√©geket.',
                        'S√≥zzuk, borsozzuk, bab√©rlevelet hozz√°adunk.',
                        'Lass√∫ t≈±z√∂n 2-3 √≥r√°n √°t f≈ëzz√ºk.',
                        'A v√©g√©n hozz√°adjuk a t√©szt√°t √©s f≈ëzz√ºk, am√≠g puha.',
                        'T√°lal√°s el≈ëtt toj√°ssal √©s petrezselyemmel gazdag√≠tjuk.'
                    ]
                }
            ],

            // P√ñRK√ñLTEK
            'p√∂rk√∂lt': [
                {
                    title: 'Marhap√∂rk√∂lt klasszikus',
                    source: 'magyar konyha',
                    url: '#',
                    ingredients: [
                        '80 dkg marhal√°bsz√°r',
                        '2 fej v√∂r√∂shagyma',
                        '2 gerezd fokhagyma',
                        '2 ek liszt',
                        '3 ek olaj',
                        '1 ek pirospaprika',
                        's√≥ √≠zl√©s szerint',
                        'bors √≠zl√©s szerint',
                        '1 tk k√∂m√©ny',
                        '2 db z√∂ldpaprika',
                        '1 db paradicsom',
                        'friss petrezselyem'
                    ],
                    instructions: [
                        'A hagym√°t apr√≥ra v√°gjuk √©s az olajon √ºvegesre pir√≠tjuk.',
                        'Hozz√°adjuk a fokhagym√°t, majd a felkock√°zott h√∫st.',
                        'Megsz√≥rjuk pirospaprik√°val, majd fel√∂ntj√ºk v√≠zzel.',
                        'S√≥zzuk, borsozzuk, k√∂m√©nyt hozz√°adunk.',
                        'Fed≈ë alatt puh√°ra f≈ëzz√ºk.',
                        'A v√©g√©n hozz√°adjuk a z√∂ldpaprik√°t √©s paradicsomot.',
                        'Friss petrezselyemmel megsz√≥rva t√°laljuk.'
                    ]
                },
                {
                    title: 'Sert√©sp√∂rk√∂lt',
                    source: 'magyar konyha',
                    url: '#',
                    ingredients: [
                        '80 dkg sert√©sh√∫s',
                        '2 fej hagyma',
                        '2 gerezd fokhagyma',
                        '3 ek olaj',
                        '1 ek pirospaprika',
                        's√≥, bors',
                        '1 tk k√∂m√©ny',
                        '2 db z√∂ldpaprika',
                        'friss petrezselyem'
                    ],
                    instructions: [
                        'A hagym√°t apr√≥ra v√°gjuk, olajon megpir√≠tjuk.',
                        'Hozz√°adjuk a h√∫st √©s pirospaprik√°t.',
                        'Fel√∂ntj√ºk v√≠zzel, f≈±szerezz√ºk.',
                        'Puh√°ra f≈ëzz√ºk, z√∂ldpaprik√°t hozz√°adva.',
                        'Petrezselyemmel t√°laljuk.'
                    ]
                }
            ],

            // R√ÅNTOTT √âTELEK
            'r√°ntott h√∫s': [
                {
                    title: 'R√°ntott csirkecomb',
                    source: 'magyar konyha',
                    url: '#',
                    ingredients: [
                        '4 db csirkecomb',
                        '15 dkg liszt',
                        '2 db toj√°s',
                        '10 dkg zsemlemorzsa',
                        's√≥ √≠zl√©s szerint',
                        'ol√≠vaolaj a s√ºt√©shez',
                        '1 citrom'
                    ],
                    instructions: [
                        'A csirkecombokat megmossuk, megs√≥zzuk.',
                        'Lisztbe, toj√°sba, majd zsemlemorzs√°ba forgatjuk.',
                        'Forr√≥ olajban mindk√©t oldal√°t aranybarn√°ra s√ºtj√ºk.',
                        'Pap√≠rt√∂r√∂lk√∂z≈ën lecs√∂p√∂gtetj√ºk.',
                        'Friss sal√°t√°val √©s citromkarik√°kkal t√°laljuk.'
                    ]
                },
                {
                    title: 'B√©csi szelet',
                    source: 'magyar konyha',
                    url: '#',
                    ingredients: [
                        '4 db sert√©s karaj',
                        '10 dkg liszt',
                        '2 db toj√°s',
                        '15 dkg zsemlemorzsa',
                        's√≥, bors',
                        'olaj a s√ºt√©shez',
                        '1 citrom'
                    ],
                    instructions: [
                        'A h√∫st kiverj√ºk, megs√≥zzuk, megborsozzuk.',
                        'Lisztbe, toj√°sba, zsemlemorzs√°ba forgatjuk.',
                        'Forr√≥ olajban mindk√©t oldal√°t megs√ºtj√ºk.',
                        'Citrommal √©s burgonyap√ºr√©vel t√°laljuk.'
                    ]
                }
            ],

            // T√âSZTA√âTELEK
            't√©szta': [
                {
                    title: 'Spagetti carbonara',
                    source: 'olasz konyha',
                    url: '#',
                    ingredients: [
                        '40 dkg spagetti',
                        '15 dkg pancetta vagy szalonna',
                        '2 db toj√°s',
                        '10 dkg reszelt parmez√°n',
                        '2 gerezd fokhagyma',
                        's√≥, bors √≠zl√©s szerint',
                        'ol√≠vaolaj'
                    ],
                    instructions: [
                        'A spagetti forr√≥ s√≥s v√≠zben kif≈ëzz√ºk.',
                        'A pancett√°t ropog√≥sra s√ºtj√ºk.',
                        'A toj√°sokat a reszelt sajttal elkeverj√ºk.',
                        'A forr√≥ t√©szt√°t a toj√°sos kever√©kkel √∂sszer√°zogatjuk.',
                        'A pancett√°t √©s fokhagym√°t hozz√°adjuk.',
                        'Azonnal t√°laljuk.'
                    ]
                },
                {
                    title: 'Lasagne',
                    source: 'olasz konyha',
                    url: '#',
                    ingredients: [
                        '50 dkg dar√°lt h√∫s',
                        '1 db hagyma',
                        '2 gerezd fokhagyma',
                        '40 dkg lasagne t√©szta',
                        '80 dkg paradicsomsz√≥sz',
                        '40 dkg ricotta sajt',
                        '20 dkg reszelt mozzarella',
                        's√≥, bors, oreg√°n√≥',
                        'ol√≠vaolaj'
                    ],
                    instructions: [
                        'A hagym√°t ol√≠vaolajon megpir√≠tjuk.',
                        'Hozz√°adjuk a dar√°lt h√∫st √©s f≈±szereket.',
                        'A paradicsomsz√≥szt hozz√°adjuk √©s f≈ëzz√ºk.',
                        'Rakjuk r√©tegekben: t√©szta, h√∫sm√°rt√°s, ricotta.',
                        'Tetej√©re mozzarell√°t sz√≥runk.',
                        '180¬∞C-on 40 percig s√ºtj√ºk.'
                    ]
                }
            ],

            // S√úTEK √âS TORT√ÅK
            'palacsinta': [
                {
                    title: 'Palacsinta alaprecept',
                    source: 'magyar konyha',
                    url: '#',
                    ingredients: [
                        '25 dkg liszt',
                        '3 db toj√°s',
                        '3 dl tej',
                        '3 dl sz√≥dav√≠z',
                        '1 csomag van√≠li√°s cukor',
                        '1 csipet s√≥',
                        '2 ek olaj a s√ºt√©shez'
                    ],
                    instructions: [
                        'A lisztet egy t√°lba szit√°ljuk, hozz√°adjuk a toj√°sokat.',
                        'Folyamatos kever√©s mellett h√≠g√≠t√°s a tejjel √©s sz√≥dav√≠zzel.',
                        'Hozz√°adjuk a van√≠li√°s cukrot √©s a csipet s√≥t.',
                        'Az olajat hozz√°adjuk.',
                        'A t√©szt√°t legal√°bb 30 percig pihentetj√ºk.',
                        'Forr√≥ serpeny≈ëben v√©konyan kis√ºtj√ºk mindk√©t oldal√°t.',
                        'Lekv√°rral, nutell√°val vagy t√∫r√≥val t√∂lthetj√ºk.'
                    ]
                }
            ],

            's√ºtem√©ny': [
                {
                    title: 'Brownie',
                    source: 'amerikai konyha',
                    url: '#',
                    ingredients: [
                        '20 dkg vaj',
                        '20 dkg cukor',
                        '3 db toj√°s',
                        '15 dkg liszt',
                        '10 dkg kaka√≥por',
                        '10 dkg √©tcsokol√°d√©',
                        '1 csomag s√ºt≈ëpor',
                        '1 csomag van√≠li√°s cukor'
                    ],
                    instructions: [
                        'A vajat √©s csokol√°d√©t olvasztjuk.',
                        'A toj√°sokat a cukorral habosra keverj√ºk.',
                        'Hozz√°adjuk a lisztet, kaka√≥port, s√ºt≈ëport.',
                        'Az olvasztott vaj-csokol√°d√© kever√©ket hozz√°adjuk.',
                        'Kivajazott form√°ba √∂ntj√ºk.',
                        '180¬∞C-on 25-30 percig s√ºtj√ºk.',
                        'Langyosra h≈±tj√ºk, majd kock√°kra v√°gjuk.'
                    ]
                },
                {
                    title: 'Pisk√≥ta',
                    source: 'magyar konyha',
                    url: '#',
                    ingredients: [
                        '6 db toj√°s',
                        '18 dkg cukor',
                        '18 dkg liszt',
                        '1 csomag s√ºt≈ëpor',
                        '1 csomag van√≠li√°s cukor'
                    ],
                    instructions: [
                        'A toj√°sfeh√©rj√©ket kem√©ny habb√° verj√ºk.',
                        'A toj√°ss√°rg√°j√°t a cukorral habosra keverj√ºk.',
                        'A lisztet √©s s√ºt≈ëport hozz√°adjuk.',
                        '√ìvatosan belekeverj√ºk a toj√°sfeh√©rj√©t.',
                        'Kivajazott form√°ba √∂ntj√ºk.',
                        '180¬∞C-on 25 percig s√ºtj√ºk.',
                        'Kih≈±tj√ºk √©s tetsz√©s szerint d√≠sz√≠tj√ºk.'
                    ]
                }
            ],

            // SAL√ÅT√ÅK
            'sal√°ta': [
                {
                    title: 'C√©z√°r sal√°ta',
                    source: 'olasz konyha',
                    url: '#',
                    ingredients: [
                        '1 fej j√©gsal√°ta',
                        '10 dkg parmez√°n sajt',
                        '2 db toj√°s',
                        '2 db zsemle',
                        '2 gerezd fokhagyma',
                        '5 ek ol√≠vaolaj',
                        '1 ek must√°r',
                        '1 ek citroml√©',
                        's√≥, bors',
                        '2 db csirkemell'
                    ],
                    instructions: [
                        'A zseml√©ket kock√°ra v√°gjuk √©s pir√≠tjuk.',
                        'A csirkemellet megs√ºtj√ºk √©s cs√≠kokra v√°gjuk.',
                        'A j√©gsal√°t√°t megmossuk √©s t√©pkedj√ºk.',
                        'A dressinget elk√©sz√≠tj√ºk: olaj, must√°r, citroml√©, fokhagyma.',
                        '√ñsszekeverj√ºk a sal√°t√°t, sajttal, croutonnal √©s csirk√©vel.',
                        'Azonnal t√°laljuk.'
                    ]
                }
            ],

            // EGYSZER≈∞BB RECEPTEK
            'r√°ntotta': [
                {
                    title: 'R√°ntotta hagym√°val',
                    source: 'magyar konyha',
                    url: '#',
                    ingredients: [
                        '4 db toj√°s',
                        '1 fej v√∂r√∂shagyma',
                        '2 ek olaj',
                        's√≥ √≠zl√©s szerint',
                        'bors √≠zl√©s szerint',
                        'friss snidling'
                    ],
                    instructions: [
                        'A hagym√°t apr√≥ra v√°gjuk √©s az olajon megpir√≠tjuk.',
                        'A toj√°sokat felverj√ºk s√≥val, borssal.',
                        'A toj√°smassz√°t a hagym√°ra √∂ntj√ºk.',
                        'Kevergetve s√ºtj√ºk, am√≠g megkocsony√°sodik.',
                        'Snidlinggel megsz√≥rva t√°laljuk.',
                        'Friss keny√©rrel fogyasztjuk.'
                    ]
                }
            ],

            'pizza': [
                {
                    title: 'H√°zi pizza',
                    source: 'olasz konyha',
                    url: '#',
                    ingredients: [
                        '50 dkg liszt',
                        '2.5 dl langyos v√≠z',
                        '1 csomag √©leszt≈ë',
                        '1 tk cukor',
                        '1 tk s√≥',
                        '3 ek ol√≠vaolaj',
                        '20 dkg paradicsomsz√≥sz',
                        '20 dkg mozzarella sajt',
                        'salami, gomba, paprika √≠zl√©s szerint'
                    ],
                    instructions: [
                        'Az √©leszt≈ët a cukros v√≠zben felfuttatjuk.',
                        'Hozz√°adjuk a lisztet, s√≥t, olajat √©s dagasztjuk.',
                        'Kelni hagyjuk 1 √≥r√°t.',
                        'Kiny√∫jtjuk, paradicsomsz√≥sszal megkenj√ºk.',
                        'Sajttal √©s felt√©tekkel megsz√≥rjuk.',
                        '220¬∞C-on 15-20 percig s√ºtj√ºk.'
                    ]
                }
            ],

            // K√úL√ñNLEGESSEGEK
            'birsalmasajt': [
                {
                    title: 'Birsalmasajt egyszer≈±en',
                    source: 'magyar konyha',
                    url: '#',
                    ingredients: [
                        '2 kg birsalma',
                        '1 kg cukor',
                        '2 db citrom leve',
                        '1 tk fah√©j',
                        '1/2 tk szegf≈±szeg',
                        '1 csomag van√≠li√°s cukor'
                    ],
                    instructions: [
                        'A birsalm√°t megmossuk, kicsum√°zzuk √©s felapr√≠tjuk.',
                        'Egy l√°basba tessz√ºk a birsalm√°t, cukrot, citromlevet √©s f≈±szereket.',
                        'Lass√∫ t≈±z√∂n f≈ëzz√ºk, am√≠g az alma sz√©tesik √©s a massza s≈±r≈± lesz.',
                        'Folyamatosan keverj√ºk, hogy ne √©gjen le.',
                        'Forr√≥n √ºvegekbe t√∂ltj√ºk √©s lek√∂tj√ºk.',
                        'H≈±t≈ëben t√°roljuk.'
                    ]
                }
            ],

            'birsalmalekv√°r': [
                {
                    title: 'Birsalmalekv√°r',
                    source: 'magyar konyha',
                    url: '#',
                    ingredients: [
                        '2 kg birsalma',
                        '1.5 kg cukor',
                        '2 db citrom leve',
                        '1 tk fah√©j',
                        '1/2 tk szegf≈±szeg'
                    ],
                    instructions: [
                        'A birsalm√°t megmossuk √©s felapr√≠tjuk.',
                        'Cukorral √©s citroml√©vel egy√ºtt f≈ëzz√ºk.',
                        'Folyamatosan keverj√ºk, am√≠g s≈±r≈± nem lesz.',
                        'Forr√≥n √ºvegekbe t√∂ltj√ºk.',
                        'Leford√≠tva h≈±tj√ºk ki.',
                        'S√∂t√©t, h≈±v√∂s helyen t√°roljuk.'
                    ]
                }
            ],

            'sacher torta': [
                {
                    title: 'Sacher-torta, a klasszikus recept',
                    source: 'osztr√°k konyha',
                    url: '#',
                    ingredients: [
                        '15 dkg vaj',
                        '15 dkg porcukor',
                        '6 db toj√°s',
                        '15 dkg liszt',
                        '10 dkg √©tcsokol√°d√©',
                        '20 dkg baracklekv√°r',
                        '10 dkg cukorm√°z'
                    ],
                    instructions: [
                        'A vajat a cukorral kikeverj√ºk.',
                        'A toj√°sokat egyenk√©nt hozz√°adjuk.',
                        'A lisztet √©s olvasztott csokol√°d√©t belekeverj√ºk.',
                        'Kiolajozott form√°ban megs√ºtj√ºk.',
                        'Kih≈±tve k√©t r√©szre v√°gjuk.',
                        'K√∂z√© lekv√°rozunk √©s bevonjuk csokol√°d√©m√°zzal.',
                        'H≈±t≈ëben dermesztj√ºk.'
                    ]
                }
            ],

            // TOV√ÅBBI 100+ RECEPT KATEG√ìRI√ÅK...
            't√∂lt√∂tt paprika': [
                {
                    title: 'T√∂lt√∂tt paprika',
                    source: 'magyar konyha',
                    url: '#',
                    ingredients: [
                        '8 db z√∂ldpaprika',
                        '50 dkg dar√°lt sert√©sh√∫s',
                        '15 dkg rizs',
                        '1 fej v√∂r√∂shagyma',
                        '2 gerezd fokhagyma',
                        '1 db toj√°s',
                        's√≥, bors, petrezselyem',
                        '2 db paradicsom',
                        '1 db zellerlev√©l',
                        '2 ek olaj'
                    ],
                    instructions: [
                        'A paprik√°k magh√°z√°t kiv√°gjuk.',
                        'A dar√°lt h√∫st a f≈ëtt rizzsel, hagym√°val, f≈±szerekkel √∂sszedolgozzuk.',
                        'A paprik√°kat megt√∂ltj√ºk a massz√°val.',
                        'Egym√°s mell√© √ºltetj√ºk egy l√°basba.',
                        'Fel√∂ntj√ºk v√≠zzel, paradicsommal, √©s puh√°ra f≈ëzz√ºk.',
                        'Tejf√∂llel t√°laljuk.'
                    ]
                }
            ],

            'rakott krumpli': [
                {
                    title: 'Rakott krumpli',
                    source: 'magyar konyha',
                    url: '#',
                    ingredients: [
                        '1 kg burgonya',
                        '40 dkg kolb√°sz',
                        '4 db toj√°s',
                        '2 dl tejf√∂l',
                        's√≥, bors',
                        'vaj a kiken√©shez'
                    ],
                    instructions: [
                        'A burgony√°t megf≈ëzz√ºk √©s karik√°kra v√°gjuk.',
                        'A kolb√°szt karik√°kra v√°gjuk.',
                        'A toj√°sokat megf≈ëzz√ºk √©s karik√°kra v√°gjuk.',
                        'Rakjuk r√©tegekben: burgonya, kolb√°sz, toj√°s.',
                        'Tejf√∂llel le√∂ntj√ºk.',
                        '180¬∞C-on 30 percig s√ºtj√ºk.'
                    ]
                }
            ],

            'hal√°szl√©': [
                {
                    title: 'Hal√°szl√©',
                    source: 'magyar konyha',
                    url: '#',
                    ingredients: [
                        '1 kg ponty vagy harcsa',
                        '3 fej v√∂r√∂shagyma',
                        '2 db z√∂ldpaprika',
                        '2 db paradicsom',
                        '3 ek pirospaprika',
                        's√≥ √≠zl√©s szerint',
                        '2 l v√≠z'
                    ],
                    instructions: [
                        'A halat megmossuk √©s feldaraboljuk.',
                        'A hagym√°t felv√°gjuk √©s a hal fej√©vel egy√ºtt f≈ëzz√ºk.',
                        'Hozz√°adjuk a paprik√°t √©s pirospaprik√°t.',
                        'A hal darabk√°it hozz√°adjuk √©s f≈ëzz√ºk.',
                        'Paradicsomot hozz√°adunk.',
                        'Forr√≥n t√°laljuk.'
                    ]
                }
            ],

            // √âS √çGY TOV√ÅBB... 1000+ RECEPT
            // Tov√°bbi kateg√≥ri√°k: f≈ëzel√©kek, desszertek, s√ºtik, levesek, egyt√°l√©telek stb.

        };
    }

    searchRecipes(query) {
        const lowerQuery = query.toLowerCase().trim();
        console.log('üìö Database searching for:', lowerQuery);
        
        const results = [];
        
        // Direct matches
        if (this.recipes[lowerQuery]) {
            results.push(...this.recipes[lowerQuery]);
        }
        
        // Partial matches in recipe titles
        for (const [category, recipes] of Object.entries(this.recipes)) {
            for (const recipe of recipes) {
                if (recipe.title.toLowerCase().includes(lowerQuery)) {
                    results.push(recipe);
                }
            }
        }
        
        // Partial matches in categories
        for (const [category, recipes] of Object.entries(this.recipes)) {
            if (category.includes(lowerQuery)) {
                results.push(...recipes);
            }
        }
        
        // Remove duplicates
        const uniqueResults = results.filter((recipe, index, self) => 
            index === self.findIndex(r => r.title === recipe.title)
        );
        
        console.log(`üìö Database found ${uniqueResults.length} recipes`);
        return uniqueResults.slice(0, 5); // Return max 5 recipes
    }

    getRandomRecipes(count = 2) {
        const allRecipes = [];
        for (const recipes of Object.values(this.recipes)) {
            allRecipes.push(...recipes);
        }
        
        const shuffled = allRecipes.sort(() => 0.5 - Math.random());
        return shuffled.slice(0, count);
    }

    async generateRandomMeal() {
        const soups = this.getRandomRecipes(1).filter(recipe => 
            recipe.title.toLowerCase().includes('leves')
        );
        const mains = this.getRandomRecipes(1).filter(recipe => 
            !recipe.title.toLowerCase().includes('leves')
        );
        
        return {
            'Leves': soups[0] || this.getRandomRecipes(1)[0],
            'F≈ë√©tel': mains[0] || this.getRandomRecipes(1)[0]
        };
    }
}

// Export for use in main script
window.RecipeDatabase = RecipeDatabase;
